(function(){"use strict";var e={83839:function(e,t,s){var i=s(45130),o=s(56768);const n={id:"navBar"};function a(e,t){const s=(0,o.g2)("router-link"),i=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("nav",n,[(0,o.bF)(s,{to:"/"},{default:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.eW)("Home")]))),_:1}),(0,o.bF)(s,{to:"/ChessGame"},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)("Chess")]))),_:1}),(0,o.bF)(s,{to:"/TypingGame"},{default:(0,o.k6)((()=>t[2]||(t[2]=[(0,o.eW)("Typing")]))),_:1}),(0,o.bF)(s,{to:"/MineSweep"},{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.eW)("Mine Sweep")]))),_:1}),(0,o.bF)(s,{to:"/BoxPhysics"},{default:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.eW)("Box Physics")]))),_:1}),(0,o.bF)(s,{to:"/MultiplayerChess"},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.eW)("Multiplayer Chess")]))),_:1})]),(0,o.bF)(i,null,{default:(0,o.k6)((({Component:e})=>[((0,o.uX)(),(0,o.Wv)(o.PR,null,[((0,o.uX)(),(0,o.Wv)((0,o.$y)(e)))],1024))])),_:1})],64)}var h=s(71241);const r={},c=(0,h.A)(r,[["render",a]]);var l=c,u=s(81387);const d={class:"gameViewsWrapper"};function m(e,t,s,i,n,a){const h=(0,o.g2)("GameDisplayView");return(0,o.uX)(),(0,o.CE)("div",d,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.games,((e,t)=>((0,o.uX)(),(0,o.Wv)(h,{key:t,title:e.title,"image-src":e.imageSrc,"click-function":a.startGame},null,8,["title","image-src","click-function"])))),128))])}s(44114);var g=s(24232);const p={class:"gameDisplayBlock"},k={class:"blockHeader"},w={class:"blockImageWrapper"},b=["src","alt"],y={class:"blockButtonWrapper"};function f(e,t,s,i,n,a){return(0,o.uX)(),(0,o.CE)("div",p,[(0,o.Lk)("h1",k,(0,g.v_)(s.title),1),(0,o.Lk)("div",w,[(0,o.Lk)("img",{src:n.imagePath,alt:s.title},null,8,b)]),(0,o.Lk)("div",y,[(0,o.Lk)("div",{class:"button",onClick:t[0]||(t[0]=e=>s.clickFunction(s.title))},"start")])])}var v={name:"GameDisplay",props:["title","imageSrc","clickFunction"],data(){return{imagePath:"",arrLen:0,currIdx:0,updateImgInterval:null}},created(){"string"===typeof this.imageSrc&&(this.imagePath=this.imageSrc),Array.isArray(this.imageSrc)&&(this.imagePath=this.imageSrc[0],this.arrLen=this.imageSrc.length,this.updateImgInterval=setInterval((()=>{this.currIdx++,this.currIdx%=this.arrLen,this.imagePath=this.imageSrc[this.currIdx]}),4e3))},beforeUnmount(){clearInterval(this.updateImgInterval)}};const C=(0,h.A)(v,[["render",f]]);var x=C,B={name:"HomePage",components:{GameDisplayView:x},data(){return{games:[{title:"Chess",imageSrc:["/imgs/chess01.png","/imgs/chess02.png","/imgs/chess03.png"]},{title:"Typing",imageSrc:"/imgs/TypingGame.jpg"},{title:"MineSweep",imageSrc:"/imgs/MineSweep.jpg"},{title:"BoxPhysics",imageSrc:["/imgs/boxPhysics01.jpg","/imgs/boxPhysics02.jpg","/imgs/boxPhysics03.jpg","/imgs/boxPhysics04.jpg"]},{title:"MultiplayerChess",imageSrc:["/imgs/multiplayerChess01.png","/imgs/multiplayerChess02.png"]}]}},methods:{startGame(e){let t;switch(e){case"Chess":t="/ChessGame";break;case"Typing":t="/TypingGame";break;case"MineSweep":t="/MineSweep";break;case"BoxPhysics":t="/BoxPhysics";break;case"MultiplayerChess":t="/MultiplayerChess";break;default:t="/"}this.$router.push(t)}}};const I=(0,h.A)(B,[["render",m]]);var P=I;const A={id:"contentWrapper"},L={id:"content"},M=["onclick"];function S(e,t,s,n,a,h){const r=(0,o.g2)("LayoutInfoBar"),c=(0,o.g2)("ChessGameHeader"),l=(0,o.g2)("KeyboardComp"),u=(0,o.g2)("ButtomBar"),d=(0,o.g2)("GameResultPannel"),m=(0,o.g2)("ChessGameConfig"),p=(0,o.g2)("MessageWindow");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",A,[(0,o.Lk)("div",L,[(0,o.bF)(r,{currLayout:a.currLayout,chessLayouts:a.chessLayouts,optLayout:h.optLayout,deleteSavedGame:h.deleteSavedGame},null,8,["currLayout","chessLayouts","optLayout","deleteSavedGame"]),(0,o.bF)(c,{modelValue:a.chess.currSide,"onUpdate:modelValue":t[0]||(t[0]=e=>a.chess.currSide=e),chess:a.chess,onShiftTextQueue:h.shiftTextQueue,onUndoHistory:h.updateCheckmatePiece,auth:{undo:!0,textQueue:!0}},null,8,["modelValue","chess","onShiftTextQueue","onUndoHistory"]),(0,o.bF)(l,{onKeyboardBlocksLoaded:h.LoadKeyboardBlocks,WIDTH:8,HEIGHT:8,KEYBOARD:a.chess.keyboard,clickBlock:h.clickBlcok,onMouseDown:h.mouseDown,onMouseUp:h.mouseUp,imgsObj:{whitepawn:"/imgs/chess/whitePawn.png",whiterook:"/imgs/chess/whiteRook.png",whiteknight:"/imgs/chess/whiteKnight.png",whitebishop:"/imgs/chess/whiteBishop.png",whitequeen:"/imgs/chess/whiteQueen.png",whiteking:"/imgs/chess/whiteKing.png",blackpawn:"/imgs/chess/blackPawn.png",blackrook:"/imgs/chess/blackRook.png",blackknight:"/imgs/chess/blackKnight.png",blackbishop:"/imgs/chess/blackBishop.png",blackqueen:"/imgs/chess/blackQueen.png",blackking:"/imgs/chess/blackKing.png"}},null,8,["onKeyboardBlocksLoaded","KEYBOARD","clickBlock","onMouseDown","onMouseUp"]),(0,o.bF)(u,{restart:h.restart,exit:h.exit},null,8,["restart","exit"]),(0,o.Lk)("button",{id:"openConfigureGamePannel",class:"button",onclick:h.toggleConfigPannel},(0,g.v_)(a.showConfigurePannel?"close configrue game pannel":"open configure game pannel"),9,M)]),a.showResultPannel?((0,o.uX)(),(0,o.Wv)(d,{key:0,gameResults:a.gameResults},null,8,["gameResults"])):(0,o.Q3)("",!0),a.showConfigurePannel?((0,o.uX)(),(0,o.Wv)(m,{key:1,saveGame:h.saveGame},null,8,["saveGame"])):(0,o.Q3)("",!0)]),(0,o.bo)((0,o.bF)(p,{messageType:"regular",message:"new game saved to local hard disk!",showMessage:a.showMessage},null,8,["showMessage"]),[[i.aG,a.showMessage]])],64)}const T={id:"keyboardFrame"},O=["id","onClick","onMousedown","onMouseup"],R={key:1,class:"rowIdx"},E={key:2,class:"colIdx"};function G(e,t,s,i,n,a){const h=(0,o.g2)("PieceComp");return(0,o.uX)(),(0,o.CE)("div",T,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.KEYBOARD,((i,a)=>((0,o.uX)(),(0,o.CE)("div",{class:"row",key:a},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i,((i,r)=>((0,o.uX)(),(0,o.CE)("div",{id:a+","+r,key:a+","+r,class:(0,g.C4)((a+r)%2==0?"whiteBlock":"blackBlock"),style:(0,g.Tr)({width:n.BLOCK_WIDTH+"rem",height:n.BLOCK_HEIGHT+"rem"}),onClick:e=>s.clickBlock([a,r]),onMousedown:t=>e.$emit("mouseDown",[a,r]),onMouseup:t=>e.$emit("mouseUp",[a,r]),onDragstart:t[0]||(t[0]=e=>e.preventDefault())},[null!=s.KEYBOARD[a][r]?((0,o.uX)(),(0,o.Wv)(h,{key:0,type:s.KEYBOARD[a][r].type,side:s.KEYBOARD[a][r].side,imgSrc:s.imgsObj[s.KEYBOARD[a][r].side+s.KEYBOARD[a][r].name]},null,8,["type","side","imgSrc"])):(0,o.Q3)("",!0),r==s.KEYBOARD[0].length-1?((0,o.uX)(),(0,o.CE)("div",R,(0,g.v_)(a+1),1)):(0,o.Q3)("",!0),0==a?((0,o.uX)(),(0,o.CE)("div",E,(0,g.v_)(String.fromCharCode(s.KEYBOARD[0].length-r-1+65)),1)):(0,o.Q3)("",!0)],46,O)))),128))])))),128))])}const H={class:"imgWrapper"},K=["src"];function D(e,t,s,i,n,a){return(0,o.uX)(),(0,o.CE)("div",{class:(0,g.C4)("piece "+("white"==s.side?"whitePiece":"blackPiece")+" "+s.type)},[(0,o.Lk)("div",H,[(0,o.Lk)("img",{src:s.imgSrc},null,8,K)])],2)}var V={name:"PieceComp",props:["type","side","imgSrc"]};const W=(0,h.A)(V,[["render",D]]);var _=W,F={name:"KeyboardComp",components:{PieceComp:_},props:["WIDTH","HEIGHT","KEYBOARD","clickBlock","imgsObj"],data(){return{BLOCK_WIDTH:5,BLOCK_HEIGHT:5,KEY_BOARD_BLOCKS:[],currPiece:null}},mounted(){(0,o.dY)((()=>{this.initKeyboardBlocks()}))},methods:{initKeyboardBlocks(){for(let e=0;e<this.HEIGHT;e++){this.KEY_BOARD_BLOCKS.push([]);for(let t=0;t<this.WIDTH;t++){const s=e+","+t,i=document.getElementById(s);this.KEY_BOARD_BLOCKS[e].push(i)}}this.$emit("keyboardBlocksLoaded",this.KEY_BOARD_BLOCKS)}}};const N=(0,h.A)(F,[["render",G]]);var X=N;const Y={id:"contentHeader"},Q={id:"turnSign"},z={key:1,id:"textBox"};function $(e,t,s,i,n,a){return(0,o.uX)(),(0,o.CE)("div",Y,[(0,o.Lk)("div",Q,[(0,o.Lk)("p",{id:"whiteTurnSign",class:(0,g.C4)("white"==a.currSide?"turnSignHighlighted":"")},null,2),(0,o.Lk)("p",{id:"blackTurnSign",class:(0,g.C4)("white"==a.currSide?"":"turnSignHighlighted")},null,2)]),s.auth.undo?((0,o.uX)(),(0,o.CE)("div",{key:0,id:"undo",class:"button",onClick:t[0]||(t[0]=(...e)=>a.undoHistory&&a.undoHistory(...e))},"undo")):(0,o.Q3)("",!0),s.auth.textQueue?((0,o.uX)(),(0,o.CE)("div",z,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.chess.textQueue,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t},(0,g.v_)(e),1)))),128))])):(0,o.Q3)("",!0)])}var q={name:"ChessGameHeader",props:["modelValue","chess","auth"],computed:{currSide:{get(){return this.modelValue}}},mounted(){this.textInterval=setInterval((()=>{this.removeText()}),2e3)},methods:{removeText(){this.chess.textQueue.length>1&&this.$emit("shiftTextQueue",this.chess.textQueue)},undoHistory(){this.chess.undoHistory(),this.$emit("undoHistory")}}};const U=(0,h.A)(q,[["render",$]]);var j=U;const J={id:"buttonWrapper"};function Z(e,t,s,i,n,a){return(0,o.uX)(),(0,o.CE)("div",J,[(0,o.Lk)("button",{id:"restart",class:"button",onClick:t[0]||(t[0]=(...e)=>s.restart&&s.restart(...e))},"restart"),(0,o.Lk)("button",{id:"exit",class:"button",onClick:t[1]||(t[1]=(...e)=>s.exit&&s.exit(...e))},"exit")])}var ee={name:"ButtomBar",props:["restart","exit"]};const te=(0,h.A)(ee,[["render",Z]]);var se=te;const ie={id:"resultPannel"};function oe(e,t,s,i,n,a){return(0,o.uX)(),(0,o.CE)("div",ie,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.gameResults,((e,t,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s},(0,g.v_)(t+": "+e),1)))),128))])}var ne={name:"GameResultPannel",props:["gameResults"]};const ae=(0,h.A)(ne,[["render",oe]]);var he=ae;const re={id:"layoutInfoBar"},ce={class:"layoutList"},le=["onClick"],ue=["onClick"];function de(e,t,s,n,a,h){return(0,o.uX)(),(0,o.CE)("div",re,[(0,o.Lk)("div",null,"name: "+(0,g.v_)(s.currLayout.name),1),(0,o.Lk)("div",null,"difficulty: "+(0,g.v_)(s.currLayout.difficulty),1),(0,o.Lk)("div",{class:"button",onClick:t[0]||(t[0]=e=>a.showLayoutOptions=!a.showLayoutOptions)},"layouts"),(0,o.bo)((0,o.Lk)("div",ce,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.chessLayouts,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"layout",key:t},[(0,o.Lk)("div",{class:"layoutInfos",onClick:e=>{a.showLayoutOptions=!1,s.optLayout(t)}},[(0,o.Lk)("div",null,"name: "+(0,g.v_)(e.name),1),(0,o.Lk)("div",null,"difficulty: "+(0,g.v_)(e.difficulty),1),(0,o.Lk)("div",null,"starting side: "+(0,g.v_)(e.side),1)],8,le),(0,o.Lk)("button",{onClick:()=>{h.deleteLayout(t)}},"delete",8,ue)])))),128))],512),[[i.aG,a.showLayoutOptions]])])}var me={name:"LayoutInfoBar",props:["currLayout","chessLayouts","optLayout","deleteSavedGame"],data(){return{showLayoutOptions:!1}},methods:{deleteLayout(e){this.deleteSavedGame(e)}}};const ge=(0,h.A)(me,[["render",de]]);var pe=ge,ke=JSON.parse('[{"name":"King\'s Gambit","side":"white","difficulty":"medium","layout":[["white",[0,0],"rook"],["white",[0,1],"knight"],["white",[0,2],"bishop"],["white",[0,3],"queen"],["white",[0,4],"king"],["white",[0,5],"bishop"],["white",[0,6],"knight"],["white",[0,7],"rook"],["white",[1,0],"pawn"],["white",[1,1],"pawn"],["white",[1,2],"pawn"],["white",[1,3],"pawn"],["white",[1,4],"pawn"],["white",[1,5],"pawn"],["white",[1,6],"pawn"],["white",[1,7],"pawn"],["black",[7,0],"rook"],["black",[7,1],"knight"],["black",[7,2],"bishop"],["black",[7,3],"queen"],["black",[7,4],"king"],["black",[7,5],"bishop"],["black",[7,6],"knight"],["black",[7,7],"rook"],["black",[6,0],"pawn"],["black",[6,1],"pawn"],["black",[6,2],"pawn"],["black",[6,3],"pawn"],["black",[6,4],"pawn"],["black",[6,5],"pawn"],["black",[6,6],"pawn"],["black",[6,7],"pawn"]]},{"name":"Test Case","side":"white","difficulty":"none","layout":[["black",[0,4],"king"],["white",[6,0],"queen"],["white",[6,6],"king"],["white",[6,7],"rook"]]},{"name":"Sicilian Defense","side":"black","difficulty":"hard","layout":[["white",[0,0],"rook"],["white",[0,1],"knight"],["white",[0,2],"bishop"],["white",[0,3],"queen"],["white",[0,4],"king"],["white",[0,5],"bishop"],["white",[0,6],"knight"],["white",[0,7],"rook"],["white",[1,0],"pawn"],["white",[1,1],"pawn"],["white",[1,2],"pawn"],["white",[1,3],"pawn"],["white",[1,4],"pawn"],["white",[1,5],"pawn"],["white",[1,6],"pawn"],["white",[1,7],"pawn"],["black",[7,0],"rook"],["black",[7,1],"knight"],["black",[7,2],"bishop"],["black",[7,3],"queen"],["black",[7,4],"king"],["black",[7,5],"bishop"],["black",[7,6],"knight"],["black",[7,7],"rook"],["black",[6,0],"pawn"],["black",[6,1],"pawn"],["black",[6,2],"pawn"],["black",[6,3],"pawn"],["black",[5,4],"pawn"],["black",[6,5],"pawn"],["black",[6,6],"pawn"],["black",[6,7],"pawn"]]},{"name":"Ruy-Lopez Opening","side":"white","difficulty":"medium","layout":[["white",[0,0],"rook"],["white",[0,1],"knight"],["white",[0,2],"bishop"],["white",[0,3],"queen"],["white",[0,4],"king"],["white",[0,5],"bishop"],["white",[0,6],"knight"],["white",[0,7],"rook"],["white",[1,0],"pawn"],["white",[1,1],"pawn"],["white",[1,2],"pawn"],["white",[1,3],"pawn"],["white",[1,4],"pawn"],["white",[1,5],"pawn"],["white",[1,6],"pawn"],["white",[1,7],"pawn"],["black",[7,0],"rook"],["black",[7,1],"knight"],["black",[7,2],"bishop"],["black",[7,3],"queen"],["black",[7,4],"king"],["black",[7,5],"bishop"],["black",[7,6],"knight"],["black",[7,7],"rook"],["black",[6,0],"pawn"],["black",[6,1],"pawn"],["black",[5,2],"pawn"],["black",[6,3],"pawn"],["black",[6,4],"pawn"],["black",[6,5],"pawn"],["black",[6,6],"pawn"],["black",[6,7],"pawn"]]},{"name":"French Defense","side":"black","difficulty":"medium","layout":[["white",[0,0],"rook"],["white",[0,1],"knight"],["white",[0,2],"bishop"],["white",[0,3],"queen"],["white",[0,4],"king"],["white",[0,5],"bishop"],["white",[0,6],"knight"],["white",[0,7],"rook"],["white",[1,0],"pawn"],["white",[1,1],"pawn"],["white",[1,2],"pawn"],["white",[1,3],"pawn"],["white",[1,4],"pawn"],["white",[1,5],"pawn"],["white",[1,6],"pawn"],["white",[1,7],"pawn"],["black",[7,0],"rook"],["black",[7,1],"knight"],["black",[7,2],"bishop"],["black",[7,3],"queen"],["black",[7,4],"king"],["black",[7,5],"bishop"],["black",[7,6],"knight"],["black",[7,7],"rook"],["black",[6,0],"pawn"],["black",[6,1],"pawn"],["black",[6,2],"pawn"],["black",[5,3],"pawn"],["black",[6,4],"pawn"],["black",[6,5],"pawn"],["black",[6,6],"pawn"],["black",[6,7],"pawn"]]},{"name":"Caro-Kann Defense","side":"black","difficulty":"hard","layout":[["white",[0,0],"rook"],["white",[0,1],"knight"],["white",[0,2],"bishop"],["white",[0,3],"queen"],["white",[0,4],"king"],["white",[0,5],"bishop"],["white",[0,6],"knight"],["white",[0,7],"rook"],["white",[1,0],"pawn"],["white",[1,1],"pawn"],["white",[1,2],"pawn"],["white",[1,3],"pawn"],["white",[1,4],"pawn"],["white",[1,5],"pawn"],["white",[1,6],"pawn"],["white",[1,7],"pawn"],["black",[7,0],"rook"],["black",[7,1],"knight"],["black",[7,2],"bishop"],["black",[7,3],"queen"],["black",[7,4],"king"],["black",[7,5],"bishop"],["black",[7,6],"knight"],["black",[7,7],"rook"],["black",[6,0],"pawn"],["black",[6,1],"pawn"],["black",[6,2],"pawn"],["black",[6,3],"pawn"],["black",[5,4],"pawn"],["black",[6,5],"pawn"],["black",[6,6],"pawn"],["black",[6,7],"pawn"]]},{"name":"King\'s Fortress","side":"white","difficulty":"hard","layout":[["white",[0,3],"king"],["white",[0,2],"rook"],["white",[0,4],"rook"],["white",[1,2],"pawn"],["white",[1,3],"pawn"],["white",[1,4],"pawn"],["white",[2,3],"pawn"],["white",[2,2],"pawn"],["white",[2,4],"pawn"],["black",[7,7],"king"],["black",[7,6],"queen"],["black",[6,6],"pawn"],["black",[5,7],"pawn"],["black",[6,5],"rook"],["black",[7,4],"rook"]]},{"name":"Pawn Storm","side":"black","difficulty":"medium","layout":[["white",[0,4],"king"],["white",[0,5],"rook"],["white",[1,3],"bishop"],["white",[1,5],"pawn"],["white",[2,5],"pawn"],["white",[3,5],"pawn"],["white",[1,6],"pawn"],["white",[2,6],"pawn"],["white",[3,6],"pawn"],["black",[7,3],"king"],["black",[7,2],"queen"],["black",[7,1],"rook"],["black",[6,2],"pawn"],["black",[6,3],"pawn"],["black",[5,3],"bishop"],["black",[6,4],"pawn"],["black",[5,4],"pawn"],["black",[5,5],"pawn"]]}]'),we=s(91114);s(18111),s(7588);class be{constructor(){(0,we.A)(this,"KEYBOARD_WIDTH",8),(0,we.A)(this,"KEYBOARD_HEIGHT",8),(0,we.A)(this,"keyboard",[]),(0,we.A)(this,"currSide","white"),(0,we.A)(this,"currPiece",null),(0,we.A)(this,"whiteKing",null),(0,we.A)(this,"blackKing",null),(0,we.A)(this,"history",[]),(0,we.A)(this,"moveRecord",[]),(0,we.A)(this,"checkmatePiece",null),(0,we.A)(this,"status","pending"),(0,we.A)(this,"gameTime",0),(0,we.A)(this,"winner",null),(0,we.A)(this,"timeInterval",null),(0,we.A)(this,"textQueue",[])}initKeyboard(){this.keyboard.length=0;for(let e=0;e<this.KEYBOARD_HEIGHT;e++)this.keyboard.push(Array(this.KEYBOARD_WIDTH).fill(null))}initChessGame(e){this.initKeyboard(),this.currSide=e.side,this.currPiece=null,this.whiteKing=null,this.blackKing=null,this.history=[],this.moveRecord=[],this.checkmatePiece=null,this.status="ongoing",this.gameTime=0,this.winner=null,clearInterval(this.timeInterval),this.timeInterval=setInterval((()=>{this.gameTime+=1}),1e3),this.textQueue=[],e.layout.forEach((e=>{this.addPiece(...e)})),this.status="ongoing"}addPiece(e="white",t=[0,0],s="pawn"){const i=ye.generatePiece(e,t,s);"king"==s&&("white"==e&&(this.whiteKing&&this.removeFromKeyboard(this.whiteKing),this.whiteKing=i),"black"==e&&(this.blackKing&&this.removeFromKeyboard(this.blackKing),this.blackKing=i)),this.addToKeyboard(i)}addToKeyboard(e){const[t,s]=e.coordinate;this.keyboard[t][s]=e}removeFromKeyboard(e){const[t,s]=e.coordinate;this.keyboard[t][s]==e&&(this.keyboard[t][s]=null)}makeChessMove(e){if(this.textQueue.length=0,"ended"===this.status)return;if(1==e.length){const[t,s]=e[0],i=t.checkMove(s,this);if(Array.isArray(i))return this[i[0]](...i.slice(1));if(1!=i)return this.addText("the move does not follow the rule of chess"),!1}const t=e.length;this.moveRecord.push(t);for(let s=0;s<t;s++){const[t,i]=e[s];this.loadMove(t,i)}return this.varifyMoveByCheckmate(e[e.length-1])?(this.changeSide(),!0):(this.undoHistory(),!1)}loadMove(e,t){this.addHistory(e,t),this.removeFromKeyboard(e),e.coordinate=t,this.updateIfMoved(e),this.addToKeyboard(e)}updateIfMoved(e){0==e.moved&&(e.moved=!0)}changeSide(){this.currSide="white"==this.currSide?"black":"white"}promotion(e){let t;do{t=prompt("enter knight/bishop/rook/queen")}while(-1==["knight","bishop","rook","queen"].indexOf(t));setTimeout((()=>{if(this.currSide!=e.side){const s=e.coordinate,i=e.side;this.removeFromKeyboard(e),this.addPiece(i,s,t),this.changeSide(),this.varifyMoveByCheckmate(),this.changeSide()}}),100)}castling(e,t){const[s,i]=e.coordinate,[o,n]=t.coordinate,a=(n-i)/Math.abs(n-i),h=-a,r=[[e,[s,n-a]],[t,[o,n+2*h]]];return this.makeChessMove(r)}checkmateChecker(e,t,s){if(null==t||null==s)return;let i=!1;const[o,n]=e.coordinate,[a,h]=t.coordinate;if(e.side!=t.side)t.checkMove(e.coordinate,this)&&(i=!0);else if(e!=t){const t=Math.abs(o-a),s=Math.abs(n-h);if(t==s){const t=(a-o)/Math.abs(a-o),s=(h-n)/Math.abs(h-n),r=this.searchByStep(e.coordinate,t,s);null!=r&&r.side!=e.side&&["queen","bishop"].includes(r.type)&&(i=!0)}if(t>0&&0==s||0==t&&s>0){let t=0,s=0;o==a&&(s=(h-n)/Math.abs(h-n)),n==h&&(t=(a-o)/Math.abs(a-o));const r=this.searchByStep(e.coordinate,t,s);null!=r&&r.side!=e.side&&["queen","bishop"].includes(r.type)&&(i=!0)}}else e==t&&(i=null!=this.checkIfInDanger(e));return i}searchStraightPath(e,t){const[s,i]=e,[o,n]=t;let a=s,h=0,r=i,c=0,l=null;s==o&&(c=(n-i)/Math.abs(n-i)),i==n&&(h=(o-s)/Math.abs(o-s));do{if(a+=h,r+=c,a<0||a>this.KEYBOARD_HEIGHT-1)break;if(r<0||r>this.KEYBOARD_WIDTH-1)break;l=this.keyboard[a][r]}while(null==l&&(a!=o||r!=n));return l}searchDiagnalPath(e,t){const[s,i]=e,[o,n]=t;let a=s;const h=(o-s)/Math.abs(o-s);let r=i;const c=(n-i)/Math.abs(n-i);let l;do{if(a+=h,r+=c,a<0||a>this.KEYBOARD_HEIGHT-1)break;if(r<0||r>this.KEYBOARD_WIDTH-1)break;l=this.keyboard[a][r]}while(null==l&&a!=o&&r!=n);return l}searchByStep(e,t,s){if(null==e||null==t||null==s)return;let i,[o,n]=e;do{if(o+=t,n+=s,o<0||o>this.KEYBOARD_HEIGHT-1)break;if(n<0||n>this.KEYBOARD_WIDTH-1)break;i=this.keyboard[o][n]}while(null==i);return i}checkIfInDanger(e){let t;t=[[1,-1],[1,1],[-1,1],[-1,-1]];for(let s=0;s<t.length;s++){const[i,o]=t[s],n=this.searchByStep(e.coordinate,i,o);if(null!=n&&n.side!=e.side&&["queen","bishop"].includes(n.type))return n;if(null!=n&&n.side!=e.side&&"pawn"==n.type&&n.checkMoveWithoutInvokePromotion(e.coordinate,this))return n}t=[[0,-1],[0,1],[-1,0],[1,0]];for(let s=0;s<t.length;s++){const[i,o]=t[s],n=this.searchByStep(e.coordinate,i,o);if(null!=n&&n.side!=e.side&&["queen","rook"].includes(n.type))return n}t=[[1,2],[1,-2],[-1,2],[-1,-2],[2,1],[-2,1],[2,-1],[-2,-1]];for(let s=0;s<t.length;s++){const[i,o]=e.coordinate,n=i+t[s][0],a=o+t[s][1];if(n<0||n>this.KEYBOARD_HEIGHT-1)continue;if(a<0||a>this.KEYBOARD_WIDTH-1)continue;const h=this.keyboard[n][a];if(null!=h&&h.side!=e.side&&"knight"==h.type)return h}t=[[1,-1],[1,1],[-1,1],[-1,-1],[0,-1],[0,1],[-1,0],[1,0]];for(let s=0;s<t.length;s++){const[i,o]=e.coordinate,n=i+t[s][0],a=o+t[s][1];if(n<0||n>this.KEYBOARD_HEIGHT-1)continue;if(a<0||a>this.KEYBOARD_WIDTH-1)continue;const h=this.keyboard[n][a];if(null!=h&&h.side!=e.side&&"king"==h.type)return h}return null}addHistory(e,t){const[s,i]=t,o=e,n=e.coordinate,a=this.keyboard[s][i],h=t,r=this.currSide,c=e.moved,l=this.checkmatePiece;this.history.push([o,n,c,a,h,r,l])}undoHistory(){if("ended"!==this.status&&this.moveRecord.length>0){const e=this.moveRecord.pop();for(let t=0;t<e;t++){const[e,t,s,i,o,n,a]=this.history.pop();this.removeFromKeyboard(e),e.coordinate=t,e.moved=s,this.addToKeyboard(e);const[h,r]=o;this.keyboard[h][r]=i,this.currSide=n,this.checkmatePiece=a}}}updateCheckmatePiece(e){this.checkmatePiece=e}varifyMoveByCheckmate(){let e=!0;const t="white"==this.currSide?this.whiteKing:this.blackKing;if(null!=this.checkIfInDanger(t)?(null==this.checkmatePiece?this.addText("this move lead to self checkmate, move denied"):null!=this.checkmatePiece&&this.addText("the move did not resolve the current checkmate, move denied"),e=!1):null!=this.checkmatePiece&&(this.addText("the move did resolved the current checkmate"),this.updateCheckmatePiece(null)),1==e){const e="white"==this.currSide?this.blackKing:this.whiteKing,t=this.checkIfInDanger(e);null!=t&&(this.addText(`checkmate the ${e.side} king!`),this.updateCheckmatePiece(e),this.ifGameOverIfCheckmate(e)&&(this.winner=this.currSide,this.endGame()))}return e}ifGameOverIfCheckmate(e){let t=!0;const s=this.checkIfInDanger(e),i=this.checkIfInDanger(s);if(this.addText("start to resolving the threat"),null==i||i==e){this.addText("no helper to kill the threat, continue resolving the threat");const i=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(let s=0;s<i.length;s++){const[o,n]=i[s];let[a,h]=e.coordinate;if(a+=o,h+=n,a<0||a>this.KEYBOARD_HEIGHT-1)continue;if(h<0||h>this.KEYBOARD_WIDTH-1)continue;const r=this.keyboard[a][h];if(null!=r&&r.side==e.side||(this.moveRecord.push(1),this.loadMove(e,[a,h]),t&&=null!=this.checkIfInDanger(e),this.undoHistory()),0==t){this.addText("the threat can be resolved by moving the king");break}}if(1==t)if(this.addText("king cannot be moved, continue resolving the threat"),["knight","pawn"].includes(s.type))this.addText("the threat cannot be resolved by moving a piece in between the king and the threat"),this.addText(`game over, ${e.side} side lost`);else{const[i,o]=e.coordinate,[n,a]=s.coordinate;let h=0,r=0;n!=i&&(h=(n-i)/Math.abs(n-i)),a!=o&&(r=(a-o)/Math.abs(a-o));let c=i,l=o;while(c+h!=n||l+r!=a){c+=h,l+=r;const s=this.checkIfSideCanMoveToCoor(e.side,[c,l]);if(s&&"king"!=s.type){this.addText("the threat can be resolved by moving the piece in between king and the threat"),this.addText(`use ${s.type} at ${s.coordinate}`),t=!1;break}}1==t&&(this.addText("no piece can be moved in between the threat and the king"),this.addText(`game over, ${e.side} side lost`))}}else this.addText("the threat can be resolved by eating the threat"),this.addText(`use ${i.type} at ${i.coordinate}`),t=!1;return t}checkIfSideCanMoveToCoor(e,t){const s=this.keyboard;for(let i=0;i<s.length;i++)for(let o=0;o<s[i].length;o++){const n=s[i][o];if(n&&n.side==e&&"king"!=n.type&&n.checkMove(t,this))return n}return null}endGame(){console.log("game ended"),this.status="ended",clearInterval(this.timeInterval)}addText(e){this.textQueue.push(e)}}class ye{constructor(e="white",t=[0,0],s){(0,we.A)(this,"side","white"),(0,we.A)(this,"coordinate",[0,0]),(0,we.A)(this,"type","pawn"),this.side=e,this.coordinate=t,this.type=s}static generatePiece(e="white",t=[0,0],s="pawn"){let i;switch(s){case"pawn":i=new fe(e,t);break;case"knight":i=new Ce(e,t);break;case"bishop":i=new ve(e,t);break;case"rook":i=new xe(e,t);break;case"king":i=new Be(e,t);break;case"queen":i=new Ie(e,t);break;default:i=new fe}return i}}class fe extends ye{constructor(e="white",t=[0,0]){super(e,t,"pawn"),(0,we.A)(this,"name","pawn"),(0,we.A)(this,"moved",!1)}checkMove(e,t){const s=t.keyboard,i=e[0],o=this.checkMoveWithoutInvokePromotion(e,t);return o&&("white"==this.side&&i==s.length-1||"black"==this.side&&0==i)&&t.promotion(this),o}checkMoveWithoutInvokePromotion(e,t){const s=t.keyboard,[i,o]=e,[n,a]=this.coordinate;let h;if("white"==this.side){const e=s[i][o];h=o==a&&i==n+1||1==Math.abs(o-a)&&i==n+1&&e&&e.side!=this.side||!this.moved&&o==a&&i==n+2&&1==n}if("black"==this.side){const e=s[i][o];h=o==a&&i==n-1||1==Math.abs(o-a)&&i==n-1&&e&&e.side!=this.side||!this.moved&&o==a&&i==n-2&&n==t.KEYBOARD_HEIGHT-2}return h}}class ve extends ye{constructor(e="white",t=[0,0]){super(e,t,"bishop"),(0,we.A)(this,"name","bishop")}checkMove(e,t){const[s,i]=this.coordinate,[o,n]=e,a=Math.abs(o-s),h=Math.abs(n-i);let r=!1;if(a==h&&0!=a){const s=t.searchDiagnalPath(this.coordinate,e);(null==s||s.coordinate[0]==e[0]&&s.coordinate[1]==e[1])&&(r=!0)}return r}}class Ce extends ye{constructor(e="white",t=[0,0]){super(e,t,"knight"),(0,we.A)(this,"name","knight")}checkMove(e){let t,s,i,o;[t,s]=e,t=parseInt(t),s=parseInt(s),[i,o]=this.coordinate,i=parseInt(i),o=parseInt(o);const n=2==Math.abs(t-i)&&1==Math.abs(s-o)||1==Math.abs(t-i)&&2==Math.abs(s-o);return n}}class xe extends ye{constructor(e="white",t=[0,0]){super(e,t,"rook"),(0,we.A)(this,"moved",!1),(0,we.A)(this,"name","rook")}checkMove(e,t){let s=!1;const[i,o]=e,[n,a]=this.coordinate;if((i==n||o==a)&&(i!=n||o!=a)){const i=t.searchStraightPath(this.coordinate,e);(null==i||i.coordinate[0]==e[0]&&i.coordinate[1]==e[1])&&(s=!0)}return s}}class Be extends ye{constructor(e="white",t=[0,0]){super(e,t,"king"),(0,we.A)(this,"moved",!1),(0,we.A)(this,"name","king")}checkMove(e,t){const s=t.keyboard,[i,o]=e,[n,a]=this.coordinate;let h=1==Math.abs(i-n)&&o==a||1==Math.abs(o-a)&&i==n||1==Math.abs(i-n)&&1==Math.abs(o-a);if(0==this.moved&&i==n&&(s[0].length-1-o==1||1==o)){let s=new xe(this.side,this.coordinate);if(s.checkMove(e,t)){s=null;const e=(o-a)/Math.abs(o-a),n=t.keyboard[i][o+e];n&&"rook"==n.type&&0==n.moved&&(h=["castling",this,n])}}return h}}class Ie extends ye{constructor(e="white",t=[0,0]){super(e,t,"queen"),(0,we.A)(this,"name","queen")}checkMove(e,t){const[s,i]=e,[o,n]=this.coordinate,a=Math.abs(s-o),h=Math.abs(i-n);let r=!1;if((s==o||i==n)&&(s!=o||i!=n)){const s=t.searchStraightPath(this.coordinate,e);(null==s||s.coordinate[0]==e[0]&&s.coordinate[1]==e[1])&&(r=!0)}if(a==h&&0!=a){const s=t.searchDiagnalPath(this.coordinate,e);(null==s||s.coordinate[0]==e[0]&&s.coordinate[1]==e[1])&&(r=!0)}return r}}class Pe{static formatBySecond(e){let t=parseInt(e/60);t=t<10?"0"+t:""+t;let s=e%60;s=s<10?"0"+s:""+s;const i=t+":"+s;return i}}var Ae=s(94373);const Le={class:"wrapper"},Me={class:"row"},Se={class:"row"},Te={class:"row"},Oe={id:"buttonWrapper"};function Re(e,t,s,n,a,h){const r=(0,o.g2)("MessageWindow");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(r,{messageType:"warning",message:"the game name already exist!",showMessage:a.showMessage},null,8,["showMessage"]),(0,o.Lk)("div",Le,[(0,o.Lk)("form",null,[(0,o.Lk)("div",Me,[t[4]||(t[4]=(0,o.Lk)("label",{for:"name"},"name:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"gameName",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>a.gameName=e),maxlength:"50"},null,512),[[i.Jo,a.gameName]]),t[5]||(t[5]=(0,o.Lk)("br",null,null,-1)),t[6]||(t[6]=(0,o.Lk)("br",null,null,-1))]),(0,o.Lk)("div",Se,[t[8]||(t[8]=(0,o.Lk)("label",{for:"side"},"side:",-1)),(0,o.bo)((0,o.Lk)("select",{id:"side","onUpdate:modelValue":t[1]||(t[1]=e=>a.side=e)},t[7]||(t[7]=[(0,o.Lk)("option",{value:"white"},"white",-1),(0,o.Lk)("option",{value:"black"},"black",-1)]),512),[[i.u1,a.side]]),t[9]||(t[9]=(0,o.Lk)("br",null,null,-1)),t[10]||(t[10]=(0,o.Lk)("br",null,null,-1))]),(0,o.Lk)("div",Te,[t[11]||(t[11]=(0,o.Lk)("label",{for:"difficulty"},"difficulty:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"gameDifficulty","onUpdate:modelValue":t[2]||(t[2]=e=>a.difficulty=e),maxlength:"10"},null,512),[[i.Jo,a.difficulty]]),t[12]||(t[12]=(0,o.Lk)("br",null,null,-1)),t[13]||(t[13]=(0,o.Lk)("br",null,null,-1))])]),(0,o.Lk)("div",Oe,[(0,o.Lk)("button",{id:"saveGame",class:"button",onClick:t[3]||(t[3]=(...e)=>h.save&&h.save(...e))},"save game")])])],64)}const Ee={class:"centeringWrapper"},Ge={class:"messageWrapper",id:"messageWindow"};function He(e,t,s,i,n,a){return(0,o.uX)(),(0,o.CE)("div",Ee,[(0,o.Lk)("div",Ge,(0,g.v_)(s.message),1)])}var Ke={name:"MessageWindow",data(){return{messageWindow:null}},props:{message:{type:String,required:!0},messageType:{type:String,required:!0},showMessage:{type:Boolean,required:!0}},watch:{showMessage(e,t){setTimeout((()=>{this.toggleVisibility()}),100)},messageType(e,t){""!==t&&this.messageWindow.classList.remove(t),""!==e&&this.messageWindow.classList.add(e)}},mounted(){this.messageWindow=document.getElementById("messageWindow"),""!==this.messageType&&this.messageWindow.classList.add(this.messageType)},methods:{toggleVisibility(){!1===this.showMessage?this.messageWindow.classList.remove("show"):this.messageWindow.classList.add("show")}}};const De=(0,h.A)(Ke,[["render",He],["__scopeId","data-v-14b24bae"]]);var Ve=De,We={name:"ChessgameConfig",props:["saveGame"],components:{MessageWindow:Ve},data(){return{gameName:"",side:"white",difficulty:"easy",showMessage:!1}},mounted(){const e=new Date;this.gameName="saved game -"+e.toLocaleTimeString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},methods:{save(){Ae.A.get("http://localhost:3000/getChessByName",{params:{name:this.gameName}}).then((e=>{e.data.length>0?(this.showMessage=!0,setTimeout((()=>{this.showMessage=!1}),3e3)):this.saveGame(this.gameName,this.side,this.difficulty)}))}}};const _e=(0,h.A)(We,[["render",Re],["__scopeId","data-v-3612a05a"]]);var Fe=_e,Ne=s(44847),Xe={name:"ChessGame",components:{KeyboardComp:X,ChessGameHeader:j,ButtomBar:se,GameResultPannel:he,LayoutInfoBar:pe,ChessGameConfig:Fe,MessageWindow:Ve},data(){return{chess:new be,KEY_BOARD_BLOCKS:[],chessLayouts:[],currLayout:{},gameResults:{time:0,winner:"unknown"},showResultPannel:!1,showConfigurePannel:!1,showMessage:!1,checkmatePiece:null,checkmateCoor:null,coorToMove:null}},watch:{checkmatePiece(e,t){if(e!==t)if(null===e){const[e,t]=this.checkmateCoor,s=document.getElementById(e+","+t);s.classList.remove("warning"),this.checkmateCoor=null}else{this.checkmateCoor=this.checkmatePiece.coordinate;const[e,t]=this.checkmateCoor,s=document.getElementById(e+","+t);s.classList.add("warning")}}},async mounted(){this.chessLayouts=ke,"pending"===this.chess.status&&(this.currLayout=this.chessLayouts[0],this.getSavedGames(),this.chess.initChessGame(this.currLayout))},methods:{LoadKeyboardBlocks(e){this.KEY_BOARD_BLOCKS=e},clickBlcok(e){if("ended"===this.chess.status)return;const[t,s]=e,i=this.chess.keyboard,o=this.chess.currPiece,n=i[t][s];null!=o&&o.side!==this.chess.currSide?(this.chess.textQueue.push(`the current side is not ${o.side}`),this.removeHighLight(o),this.chess.currPiece=null):null==o&&null==n||(null==o&&null!=n?(this.addHighLight(n),this.chess.currPiece=n):null!=o&&null==n?this.chess.makeChessMove([[this.chess.currPiece,e]])&&(this.chess.currPiece=null):null!=o&&null!=n&&(o===n?(this.removeHighLight(this.chess.currPiece),this.chess.currPiece=null):o.side===n.side?(this.removeHighLight(this.chess.currPiece),this.chess.currPiece=n,this.addHighLight(this.chess.currPiece)):this.chess.makeChessMove([[this.chess.currPiece,e]])&&(this.chess.currPiece=null))),(0,Ne.setTimeout)((()=>{this.updateCheckmatePiece(),"ended"===this.chess.status&&(this.showResultPannel=!0,this.generateResults())}),100)},addHighLight(e){const[t,s]=e.coordinate,i=this.KEY_BOARD_BLOCKS[t][s].firstElementChild;void 0!==i&&i.classList.add("highlighted")},removeHighLight(e){const[t,s]=e.coordinate,i=this.KEY_BOARD_BLOCKS[t][s].firstElementChild;i&&i.classList.remove("highlighted")},updateCheckmatePiece(){this.checkmatePiece=this.chess.checkmatePiece},exit(){this.$router.push("/HomePage")},restart(){this.showResultPannel=!1,this.chess.initChessGame(this.currLayout),this.updateCheckmatePiece()},optLayout(e){this.showL=!1,this.currLayout=this.chessLayouts[e],this.restart()},shiftTextQueue(e){e.shift()},generateResults(){this.gameResults.time=Pe.formatBySecond(this.chess.gameTime),this.gameResults.winner=this.chess.winner+" side"},async saveGame(e,t,s){const i=this.generateLayout();await Ae.A.post("http://localhost:3000/saveChessGame",{name:e,side:t,difficulty:s,layout:i}).then((e=>{console.log("game saved successfully!")})),this.showMessage=!0,(0,Ne.setTimeout)((()=>{this.showMessage=!1}),2e3),this.toggleConfigPannel(),this.getSavedGames()},async getSavedGames(){await Ae.A.get("http://localhost:3000/getChessGame").then((e=>{console.log("saved games uploaded"),this.chessLayouts=e.data.reverse().concat(ke)})).catch((e=>{console.log(e)}))},generateLayout(){const e=[],t=this.chess.keyboard;for(let s=0;s<t.length;s++)for(let i=0;i<t[s].length;i++){const o=t[s][i];if(null!=o){const t=[o.side,o.coordinate,o.name];e.push(t)}}return e},toggleConfigPannel(){this.showConfigurePannel=!this.showConfigurePannel},deleteSavedGame(e){const t=this.chessLayouts[e].name;Ae.A.delete("http://localhost:3000/delChessGame",{data:{gameName:t}}).then((t=>{console.log("game deleted"),this.chessLayouts.splice(e,1)})).catch((e=>{console.log(e)}))},mouseDown(e){this.coorToMove=e},mouseUp(e){e[0]===this.coorToMove[0]&&e[1]===this.coorToMove[1]||(this.clickBlcok(this.coorToMove),this.clickBlcok(e),this.coorToMove=null)}}};const Ye=(0,h.A)(Xe,[["render",S]]);var Qe=Ye;const ze={id:"timer"},$e={id:"textWrapper"},qe={id:"textBackground",class:"overlap textBlock"};function Ue(e,t,s,i,n,a){const h=(0,o.g2)("GameResultPannel"),r=(0,o.g2)("ButtomBar");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("h1",ze,(0,g.v_)(n.time),1),(0,o.Lk)("div",{id:"typingGameContent",onKeydown:t[0]||(t[0]=(...e)=>a.keyPressed&&a.keyPressed(...e)),tabindex:"0"},[(0,o.Lk)("div",$e,[(0,o.Lk)("div",qe,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.refChars,((e,t)=>((0,o.uX)(),(0,o.CE)("p",{class:(0,g.C4)("charBlock "+(t>n.inputChars.length-1?"":n.inputChars[t]==e?"green":"red")),key:t},(0,g.v_)(e),3)))),128))])])],32),n.showResultPannel?((0,o.uX)(),(0,o.Wv)(h,{key:0,gameResults:n.gameResults},null,8,["gameResults"])):(0,o.Q3)("",!0),(0,o.bF)(r,{restart:a.restart,exit:a.exit},null,8,["restart","exit"])],64)}var je=JSON.parse('[{"id":1,"difficulty":"easy","text":"The quick brown fox jumps over the lazy dog. This sentence is often used to test typing skills because it contains every letter of the alphabet."},{"id":2,"difficulty":"medium","text":"Typing is an essential skill in the modern world. By practicing regularly, you can improve your speed and accuracy, making daily tasks more efficient."},{"id":3,"difficulty":"hard","text":"In the intricate world of technology, efficiency and precision are paramount. Typing accurately not only ensures clarity but also saves valuable time in professional communication."},{"id":4,"difficulty":"easy","text":"Learning to type can be fun and rewarding. Start with simple sentences and gradually move to more complex ones as you build confidence."},{"id":5,"difficulty":"medium","text":"Practice makes perfect. Typing without looking at the keyboard takes time, but the benefits of mastering this skill are immense, from faster work completion to fewer errors."},{"id":6,"difficulty":"hard","text":"The adaptability of the human mind is astonishing. With consistent practice, even the most challenging typing patterns can become second nature, leading to remarkable proficiency."}]'),Je={name:"typeingGame",components:{ButtomBar:se,GameResultPannel:he},mounted(){this.paragraphs=je,this.initTypingGame()},data(){return{sentence:"",paragraphs:[],interval:null,inputChars:[],refChars:[],showResultPannel:!1,time:0,status:"pending",gameResults:{time:0,correctChar:0,wrongChar:0,accuracy:0}}},methods:{initTypingGame(){const e=Math.floor(Math.random()*this.paragraphs.length);this.sentence=this.paragraphs[e].text,this.status="pending",this.inputChars.length=0,this.refChars=this.sentence.split(""),this.showResultPannel=!1,clearInterval(this.interval),this.time=0},keyPressed(e){if("ended"===this.status)return;"pending"===this.status&&this.startGame();const t=e.key;"Backspace"===t?this.inputChars.pop():1===t.length&&this.inputChars.push(t),this.inputChars.length===this.refChars.length&&this.endGame()},startGame(){this.status="ongoing",this.interval=setInterval((()=>{this.time++}),1e3)},endGame(){this.status="ended",this.generateResults(),this.showResultPannel=!0,clearInterval(this.interval)},generateResults(){const e=this.refChars.length;let t=0;for(let s=0;s<this.refChars.length;s++)this.refChars[s]===this.inputChars[s]&&t++;this.gameResults.time=Pe.formatBySecond(this.time),this.gameResults.correctChar=t,this.gameResults.wrongChar=e-t,this.gameResults.accuracy=100*(t/e).toFixed(2)+"%"},restart(){this.initTypingGame()},exit(){this.$router.push("/HomePage")}}};const Ze=(0,h.A)(Je,[["render",Ue]]);var et=Ze;const tt={class:"difficultyList"},st=["onClick"],it={class:"sizeList"},ot=["onClick"],nt={id:"mineSweepContentWrapper"};function at(e,t,s,n,a,h){const r=(0,o.g2)("MineSweepBoard"),c=(0,o.g2)("ButtomBar"),l=(0,o.g2)("GameResultPannel");return(0,o.uX)(),(0,o.CE)(o.FK,null,[t[0]||(t[0]=(0,o.Lk)("h1",null,"mineSweep",-1)),(0,o.Lk)("div",tt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.difficulties,((e,t,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,onClick:(0,i.D$)((e=>h.changeDifficulty(t)),["prevent"]),class:(0,g.C4)("button "+(e==a.possibility?"chosenButton":""))},(0,g.v_)("difficulty: "+t+" | mine possibility: "+e+"%"),11,st)))),128))]),(0,o.Lk)("div",it,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.sizes,((e,t,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,onClick:(0,i.D$)((t=>h.changeSize(e)),["prevent"]),class:(0,g.C4)("button "+(e==a.dimension?"chosenButton":""))},(0,g.v_)(t+" | "+e.height+" * "+e.width),11,ot)))),128))]),(0,o.Lk)("div",nt,[(0,o.bF)(r,{HEIGHT:a.dimension.height,WIDTH:a.dimension.width,BOARD:a.mineSweep.BOARD,clickBlock:h.clickBlock},null,8,["HEIGHT","WIDTH","BOARD","clickBlock"])]),(0,o.bF)(c,{restart:h.restart,exit:h.exit},null,8,["restart","exit"]),a.showResultPannel?((0,o.uX)(),(0,o.Wv)(l,{key:0,gameResults:a.gameResults},null,8,["gameResults"])):(0,o.Q3)("",!0)],64)}class ht{constructor(e,t){(0,we.A)(this,"HEIGHT",3),(0,we.A)(this,"WIDTH",3),(0,we.A)(this,"BOARD",[]),(0,we.A)(this,"status","pending"),(0,we.A)(this,"possibility",30),(0,we.A)(this,"mineNum",0),(0,we.A)(this,"flagNum",0),(0,we.A)(this,"openedCellNum",0),(0,we.A)(this,"result","pending"),(0,we.A)(this,"gameTime",0),(0,we.A)(this,"gameTimeInterval",null),this.HEIGHT=e,this.WIDTH=t}initMineSweep(e=30){this.status="pending",this.possibility=e,this.mineNum=0,this.flagNum=0,this.openedCellNum=0,this.result="pending",this.gameTime=0,clearInterval(this.gameTimeInterval),this.initBoards()}initMineSweepWithCoor(e){this.gameTimeInterval=setInterval((()=>{this.gameTime++}),1e3),0===this.BOARD.length&&this.initBoards(),this.generateMines();const[t,s]=e,i=[[1,1],[1,0],[1,-1],[0,1],[0,0],[0,-1],[-1,1],[-1,0],[-1,-1]];let o,n,a,h;for(let r=0;r<i.length;r++)[o,n]=i[r],a=t+o,h=s+n,a<0||a>this.HEIGHT-1||h<0||h>this.WIDTH-1||(this.BOARD[a][h][0]=0);this.updateMineNumber(),this.generateCellValues()}initBoards(){this.BOARD.length=0;for(let e=0;e<this.HEIGHT;e++){this.BOARD[e]=[];for(let t=0;t<this.WIDTH;t++){const t=new Array(3).fill(0);this.BOARD[e].push(t)}}}generateMines(){for(let e=0;e<this.HEIGHT;e++)for(let t=0;t<this.WIDTH;t++)this.BOARD[e][t][0]=this.generateMine(this.possibility)}generateMine(e){const t=Math.floor(100*Math.random())<e;return t?-1:0}generateCellValues(){for(let e=0;e<this.HEIGHT;e++)for(let t=0;t<this.WIDTH;t++)-1!==this.BOARD[e][t][0]&&(this.BOARD[e][t][0]=this.generateCellValue([e,t]))}generateCellValue(e){const[t,s]=e,i=[[1,1],[1,0],[1,-1],[0,1],[0,-1],[-1,1],[-1,0],[-1,-1]];let o=0;for(let n=0;n<i.length;n++){const[e,a]=i[n],h=t+e,r=s+a;if(h<0||h>this.HEIGHT-1)continue;if(r<0||r>this.WIDTH-1)continue;const c=this.BOARD[t+e][s+a][0];-1===c&&o++}return o}openCell(e){if("ended"===this.status)return;const[t,s]=e,i=this.BOARD[t][s],[o,n,a]=i;if(1===n);else if(1===a);else{if("pending"===this.status&&(this.status="ongoing",this.initMineSweepWithCoor(e)),i[2]=1,this.openedCellNum++,-1===o)return this.openedCellNum--,this.endGame();o>=0&&o<=8&&this.spreadVoidCell(e)}return this.checkIfGameOver()?(this.flagNum=this.mineNum,this.endGame()):void 0}flagCell(e){if("ended"===this.status||"pending"===this.status)return;const[t,s]=e,i=this.BOARD[t][s],[o,n,a]=i;1===a||(0===n?(i[1]=1,this.flagNum++):1===n&&(i[1]=0,this.flagNum--))}spreadVoidCell(e){const[t,s]=e;if(0!==this.BOARD[t][s][0])return;const i=[[1,1],[1,0],[1,-1],[0,1],[0,-1],[-1,1],[-1,0],[-1,-1]],o=new Map;o.set(t+""+s,!0);const n=[[t,s]];while(n.length){const[e,t]=n.shift();let s,a,h,r,c;for(let l=0;l<i.length;l++)[a,h]=i[l],r=e+a,c=t+h,r<0||r>this.HEIGHT-1||c<0||c>this.WIDTH-1||!0!==o.get(r+""+c)&&(s=this.BOARD[r][c],0===s[2]&&(s[2]=1,this.openedCellNum++),o.set(r+""+c,!0),0===s[0]&&n.push([r,c]))}}spreadCell(e){const t=[[1,1],[1,0],[1,-1],[0,1],[0,-1],[-1,1],[-1,0],[-1,-1]],[s,i]=e,o=this.BOARD[s][i];let n,a,h,r,c,l=0;const u=[];for(const d of t)[n,a]=d,h=s+n,r=i+a,h<0||h>this.HEIGHT-1||r<0||r>this.WIDTH-1||(c=this.BOARD[h][r],1===c[1]?l++:0===c[2]&&u.push([h,r]));l===o[0]&&u.forEach((e=>{this.openCell(e)}))}updateMineNumber(){if(this.BOARD.length){this.mineNum=0;for(const e of this.BOARD)for(const t of e)-1===t[0]&&this.mineNum++}}checkIfGameOver(){if("ended"===this.status)return!0;const e=this.HEIGHT*this.WIDTH;return e===this.openedCellNum+this.mineNum}changeBoardSize(e,t){this.HEIGHT=e,this.WIDTH=t,this.initMineSweep()}endGame(){this.status="ended";const e=this.HEIGHT*this.WIDTH===this.openedCellNum+this.mineNum;this.result=e?"win":"fail",clearInterval(this.gameTimeInterval)}}const rt={id:"mineSweepContent"},ct=["onContextmenu","onClick"],lt={key:1,class:"cellFlag"};function ut(e,t,s,n,a,h){return(0,o.uX)(),(0,o.CE)("div",rt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.BOARD,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{id:"mineSweepRow",key:t},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e,((e,n)=>((0,o.uX)(),(0,o.CE)("div",{id:"mineSweepCell",key:t+","+n,onContextmenu:(0,i.D$)((e=>s.clickBlock([t,n],"right")),["right","prevent"]),onClick:(0,i.D$)((e=>s.clickBlock([t,n],"left")),["left","prevent"])},[1===e[2]?((0,o.uX)(),(0,o.CE)("p",{key:0,class:(0,g.C4)("cellVal "+(-1===e[0]?"mineCell":""))},(0,g.v_)(-1===e[0]?"*":0===e[0]?"":e[0]),3)):(0,o.Q3)("",!0),1===e[1]?((0,o.uX)(),(0,o.CE)("p",lt," flag ")):(0,o.Q3)("",!0)],40,ct)))),128))])))),128))])}var dt={name:"MineSweepBoard",props:["HEIGHT","WIDTH","BOARD","clickBlock"]};const mt=(0,h.A)(dt,[["render",ut]]);var gt=mt,pt={name:"MineSweep",components:{MineSweepBoard:gt,ButtomBar:se,GameResultPannel:he},data(){return{dimension:{height:10,width:10},mineSweep:null,possibility:10,difficulties:{hard:30,medium:20,easy:10},sizes:{small:{height:6,width:6},medium:{height:10,width:10},big:{height:15,width:15}},doubleClickTimeOut:null,doubleClickCoor:[],gameResults:{result:"unknown",time:0,discovered:0,"mines left":0},showResultPannel:!1}},created(){this.dimension=this.sizes.medium,this.mineSweep=new ht(this.dimension.height,this.dimension.width)},mounted(){this.possibility=this.difficulties.easy,this.mineSweep.initMineSweep(this.possibility)},methods:{clickBlock(e,t){"ended"!==this.mineSweep.status&&(null!==this.doubleClickTimeOut&&JSON.stringify(e)===JSON.stringify(this.doubleClickCoor)&&"left"===t?(clearTimeout(this.doubleClickTimeOut),this.doubleClickCoor=[],this.doubleClickTimeOut=null,this.mineSweep.spreadCell(e)):"left"===t?(this.doubleClickCoor=e,this.doubleClickTimeOut=setTimeout((()=>{this.doubleClickCoor=[],this.doubleClickTimeOut=null}),400),this.mineSweep.openCell(e)):"right"===t&&this.mineSweep.flagCell(e),"ended"===this.mineSweep.status&&(this.generateResults(),this.showResultPannel=!0))},generateResults(){this.gameResults.result=this.mineSweep.result,this.gameResults.time=Pe.formatBySecond(this.mineSweep.gameTime),this.gameResults.discovered=100*(this.mineSweep.openedCellNum/(this.mineSweep.HEIGHT*this.mineSweep.WIDTH)).toFixed(2)+"%",this.gameResults["mines left"]=this.mineSweep.mineNum-this.mineSweep.flagNum},changeDifficulty(e){this.difficulties[e]!==this.possibility&&(this.possibility=this.difficulties[e],this.restart())},changeSize(e){JSON.stringify(this.dimension)!==JSON.stringify(this.sizes[e])&&(this.dimension=e,this.mineSweep.changeBoardSize(this.dimension.height,this.dimension.width),this.restart())},restart(){this.showResultPannel=!1,this.mineSweep.initMineSweep(this.possibility)},exit(){this.$router.push("/HomePage")}}};const kt=(0,h.A)(pt,[["render",at]]);var wt=kt;const bt={id:"boxPhysicsWrapper"},yt={id:"boxPhysicsContent"};function ft(e,t,s,n,a,h){return(0,o.uX)(),(0,o.CE)(o.FK,null,[t[5]||(t[5]=(0,o.Lk)("h1",null,"box physics",-1)),(0,o.Lk)("div",bt,[(0,o.Lk)("div",yt,[a.boxPhysics?((0,o.uX)(),(0,o.CE)("div",{key:0,id:"boxPhysicsContainer",style:(0,g.Tr)(`\n      height: ${a.boxPhysics.height}px;\n      width: ${a.boxPhysics.width}px;\n      `),onKeydown:t[0]||(t[0]=(...e)=>h.keyPressed&&h.keyPressed(...e)),onKeyup:t[1]||(t[1]=(...e)=>h.keyLeft&&h.keyLeft(...e)),tabindex:"0"},[a.boxPhysics.box?((0,o.uX)(),(0,o.CE)("div",{key:0,id:"mainBox",style:(0,g.Tr)(`\n        left: ${a.boxPhysics.box.box.coor[0]}px;\n        top: ${a.boxPhysics.box.box.coor[1]}px;\n        height: ${a.boxPhysics.box.box.size[0]}px;\n        width: ${a.boxPhysics.box.box.size[1]}px;\n        `)},null,4)):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.boxPhysics.boxes,((e,t)=>(0,o.bo)(((0,o.uX)(),(0,o.CE)("div",{key:t,class:"box",style:(0,g.Tr)(`\n        left: ${e.box.coor[0]}px;\n        top: ${e.box.coor[1]}px;\n        height: ${e.box.size[0]}px;\n        width: ${e.box.size[1]}px;\n        `)},(0,g.v_)(t),5)),[[i.aG,e!==a.boxPhysics.box]]))),128))],36)):(0,o.Q3)("",!0),(0,o.Lk)("div",{class:"button",onClick:t[2]||(t[2]=(...e)=>h.addBox&&h.addBox(...e))},"add box (E)"),(0,o.Lk)("div",{class:"button",onClick:t[3]||(t[3]=(...e)=>a.boxPhysics.changeGravitationalForce&&a.boxPhysics.changeGravitationalForce(...e))},"inverse gravititional force (G)"),(0,o.Lk)("div",{class:"button",onClick:t[4]||(t[4]=(...e)=>h.removeBox&&h.removeBox(...e))},"remove box (R)")])])],64)}class vt{constructor(e=[0,0],t=[20,20]){(0,we.A)(this,"coor",[]),(0,we.A)(this,"size",[]);const s=parseInt(Math.max(20,t[0])),i=parseInt(Math.max(20,t[1])),o=parseInt(e[0]),n=parseInt(e[1]);this.coor=[o,n],this.size=[s,i]}}class Ct{constructor(e,t,s,i){(0,we.A)(this,"id",0),(0,we.A)(this,"xAccel",0),(0,we.A)(this,"xVel",0),(0,we.A)(this,"yAccel",0),(0,we.A)(this,"yVel",0),(0,we.A)(this,"box",null),(0,we.A)(this,"fps",0),(0,we.A)(this,"maxVel",400),this.id=e,this.box=new vt(t,s),this.fps=i}changeAccel(e=this.xAccel,t=this.yAccel){this.xAccel=e,this.yAccel=t}updateVel(){this.xVel+=this.xAccel/this.fps,this.yVel+=this.yAccel/this.fps,this.xVel>this.maxVel&&(this.xVel=this.maxVel),this.xVel<-this.maxVel&&(this.xVel=-this.maxVel),this.yVel>this.maxVel&&(this.yVel=this.maxVel),this.yVel<-this.maxVel&&(this.yVel=-this.maxVel)}updateCoor(){this.box.coor[0]+=this.xVel/this.fps,this.box.coor[1]+=this.yVel/this.fps}getCoor(){const e=parseInt(this.box.coor[0]),t=parseInt(this.box.coor[1]);return[e,t]}getSize(){return this.box.size}}class xt{constructor(e=500,t=500,s=0){(0,we.A)(this,"boxes",[]),(0,we.A)(this,"box",null),(0,we.A)(this,"height",0),(0,we.A)(this,"width",0),(0,we.A)(this,"fps",0),(0,we.A)(this,"GVTTN_FORCE",500),(0,we.A)(this,"FRICTION",100),(0,we.A)(this,"updateInterval",null),(0,we.A)(this,"boxCoorBoard",[]),(0,we.A)(this,"yCount",0),(0,we.A)(this,"xCount",0),(0,we.A)(this,"ground",0),(0,we.A)(this,"coorMap",new Map),(0,we.A)(this,"boxElesticity",1.3),(0,we.A)(this,"wallElesticity",1),this.height=e,this.width=t,this.fps=s,this.ground=this.height,this.initBoxCoorBoard()}initBoxCoorBoard(){for(let e=0;e<this.height;e++)this.boxCoorBoard.push(new Array(this.width).fill(0));this.yCount=new Array(this.height).fill(0),this.xCount=new Array(this.width).fill(0)}setBoxCoor(e){const[t,s]=e.getCoor(),[i,o]=e.getSize();if(t<0||t+i-1>=this.width||s<0||s+o-1>=this.height)return!1;const n=[[t,s],[t,s+o-1],[t+i-1,s],[t+i-1,s+o-1]];return n.forEach((t=>{const[s,i]=t;this.boxCoorBoard[i][s]++,this.yCount[i]++,this.xCount[s]++,this.coorMap.set(s+","+i,e)})),!0}removeBoxCoor(e){const[t,s]=e.getCoor(),[i,o]=e.getSize(),n=[[t,s],[t,s+o-1],[t+i-1,s],[t+i-1,s+o-1]];n.forEach((e=>{const[t,s]=e;this.boxCoorBoard[s][t]--,this.yCount[s]--,this.xCount[t]--,this.coorMap.delete(t+","+s)}))}createUpdateInterval(){this.updateInterval=setInterval((()=>{this.update()}),1e3/this.fps)}clearUpdateInterval(){clearInterval(this.updateInterval)}addBox(e=[0,0],t=[20,20]){const s=this.boxes.length+1,i=parseInt(e[0]),o=parseInt(e[1]);e=[i,o];const n=parseInt(t[0]),a=parseInt(t[1]);t=[n,a];const h=new Ct(s,e,t,this.fps);this.checkIfOverlap(h)||(this.setBoxCoor(h),this.boxes.push(h))}removeBox(){if(this.boxes.length>1){const e=this.boxes.pop();this.removeBoxCoor(e)}}addMainBox(e,t){this.addBox(e,t),this.box=this.boxes[this.boxes.length-1]}applyHorizontalAccel(e){"l"===e&&this.box.changeAccel(-300),"r"===e&&this.box.changeAccel(300)}stopHorizontalAccel(){this.box.changeAccel(0)}jump(){this.checkIfOnGround(this.box)&&(this.box.yVel=0===this.ground?200:-200)}update(){this.updateBoxes()}updateBoxes(){this.boxes.forEach((e=>{try{const[t,s]=e.getCoor();this.removeBoxCoor(e),e.updateVel(),e.updateCoor(),this.fixIfOutside(e);const[i,o]=e.getCoor();if(t!==i||s!==o){const t=this.checkIfOverlap(e);if(t){const[s,i]=t,o=this.coorMap.get(s+","+i),n=[[e.xVel,e.yVel],[o.xVel,o.yVel]],a=[[e.xAccel,e.yAccel],[o.xAccel,o.yAccel]],h=this.fixBoxOverlap(e,t);e.xVel=n[0][0],e.yVel=n[0][1],o.xVel=n[1][0],o.yVel=n[1][1],e.xAccel=a[0][0],e.yAccel=a[0][1],o.xAccel=a[1][0],o.yAccel=a[1][1],this.applySpeedByCollision(e,o,h)}}if(this.checkIfOnGround(e)?(this.applyFriction(e),e.changeAccel(void 0,0),e.yVel=0):this.applyGravitationalForce(e),!this.setBoxCoor(e)){const[t,s]=e.getSize();while(1)if(e.box.coor=[(this.width-t)*Math.random(),(this.height-s)*Math.random()],!this.checkIfOverlap(e))break;this.setBoxCoor(e)}}catch(t){const[s,i]=e.getSize();while(1)if(e.box.coor=[(this.width-s)*Math.random(),(this.height-i)*Math.random()],!this.checkIfOverlap(e))break;this.setBoxCoor(e)}}))}applyFriction(e){e.xVel>0&&(e.xVel-=parseInt(this.FRICTION/this.fps),e.xVel=Math.max(0,e.xVel)),e.xVel<0&&(e.xVel+=parseInt(this.FRICTION/this.fps),e.xVel=Math.min(0,e.xVel))}applyGravitationalForce(e){e.changeAccel(void 0,this.GVTTN_FORCE)}fixIfOutside(e){const[t,s]=e.getCoor(),[i,o]=e.getSize();t<0&&(e.box.coor[0]=0,e.xVel=-e.xVel*this.wallElesticity),t+i>this.width&&(e.box.coor[0]=this.width-i,e.xVel=-e.xVel*this.wallElesticity),s<0&&(e.box.coor[1]=0,e.yVel=-e.yVel*this.wallElesticity),s+o>this.height&&(e.box.coor[1]=this.height-o,e.yVel=-e.yVel*this.wallElesticity)}checkIfOnGround(e){const[t,s]=e.getCoor(),[i,o]=e.getSize();if(0===this.ground){if(s===this.ground)return!0}else if(this.ground===this.height&&s+o===this.ground)return!0;const n=0===this.ground?s-1:s+o;if(this.yCount[n]){const e=this.boxCoorBoard[n].slice(t,t+i);for(const t of e)if(t)return!0}return!1}checkIfOverlap(e){const[t,s]=e.getCoor(),[i,o]=e.getSize();for(let n=s;n<s+o;n++)if(this.yCount[n])for(let e=t;e<t+i;e++)if(this.boxCoorBoard[n][e])return[e,n];return!1}fixBoxOverlap(e,t){const[s,i]=e.getCoor(),[o,n]=e.getSize(),[a,h]=t,r=e.xVel/this.fps,c=e.yVel/this.fps,l=s-r,u=i-c;let d,m;r>=0&&(d=a-(l+o)),r<0&&(d=l-a-1),c>=0&&(m=h-(u+n)),c<0&&(m=u-h-1);const g=r>0?1:-1,p=c>0?1:-1;let k="";if(0===r&&0!==c&&(e.box.coor[1]=u+p*m,e.changeAccel(void 0,0),e.yVel=0,k="v"),0===c&&0!==r&&(e.box.coor[0]=l+g*d,e.changeAccel(0),e.xVel=0,k="h"),0!==r&&0!==c){const t=d/Math.abs(r),s=m/Math.abs(c);if(t>s){const t=Math.abs(c/r);e.box.coor[0]=l+g*d,e.box.coor[1]=u+p*(d*t),e.changeAccel(0),e.xVel=0,k="h"}if(s>t){const t=Math.abs(r/c);e.box.coor[0]=l+g*(m*t),e.box.coor[1]=u+p*m,e.changeAccel(void 0,0),e.yVel=0,k="v"}}return k}changeGravitationalForce(){this.GVTTN_FORCE=-this.GVTTN_FORCE,this.ground=0===this.ground?this.height:0}handleBoxCollide(e,t){const[s,i]=e.getCoor(),[o,n]=e.getSize(),[a,h]=t,r=e.xVel/this.fps,c=e.yVel/this.fps,l=s-r,u=i-c;let d,m;r>=0&&(d=a-(l+o)),r<0&&(d=l-a-1),c>=0&&(m=h-(u+n)),c<0&&(m=u-h-1);const g=r>0?1:-1,p=c>0?1:-1;0===r&&0!==c&&(e.box.coor[1]=u+p*m,e.changeAccel(void 0,0),e.yVel=0),0===c&&0!==r&&(e.box.coor[0]=l+g*d,e.changeAccel(0),e.xVel=0);let k="";if(0!==r&&0!==c){const t=d/Math.abs(r),s=m/Math.abs(c);if(t>s){const t=Math.abs(c/r);e.box.coor[0]=l+g*d,e.box.coor[1]=u+p*(d*t),e.changeAccel(0),e.xVel=0,k="h"}if(s>t){const t=Math.abs(r/c);e.box.coor[0]=l+g*(m*t),e.box.coor[1]=u+p*m,e.changeAccel(void 0,0),e.yVel=0,k="v"}}return k}applySpeedByCollision(e,t,s){if("h"===s){let s,i;e.getCoor()[0]<t.getCoor()[0]?(s=e,i=t):(s=t,i=e);const o=Math.abs(s.xVel-i.xVel);s.xVel-=o/2*this.boxElesticity,i.xVel+=o/2*this.boxElesticity}if("v"===s){let s,i;e.getCoor()[1]<t.getCoor()[1]?(s=e,i=t):(s=t,i=e);const o=Math.abs(s.yVel-i.yVel);s.yVel-=o/2*this.boxElesticity,i.yVel+=o/2*this.boxElesticity}}}var Bt={name:"BoxPhysics",data(){return{keyArr:[],prevKey:"",boxPhysics:null,updateInterval:null,height:500,width:500,fps:30}},created(){this.boxPhysics=new xt(this.height,this.width,this.fps),this.boxPhysics.addMainBox(),this.updateInterval=setInterval((()=>{this.updateVisual()}),1e3/this.fps),this.boxPhysics.createUpdateInterval()},beforeUnmount(){this.boxPhysics.clearUpdateInterval(),clearInterval(this.updateInterval)},methods:{updateVisual(){this.boxPhysics.boxes.forEach((e=>{e.box.coor[0]++,e.box.coor[0]--}))},keyPressed(e){const t=e.key;this.prevKey!==t&&(this.prevKey=t,["a","d"].includes(t)&&(this.keyArr.push(t),"a"===t&&this.boxPhysics.applyHorizontalAccel("l"),"d"===t&&this.boxPhysics.applyHorizontalAccel("r")),"w"===t&&this.boxPhysics.jump(),"e"===t&&this.addBox(),"g"===t&&this.boxPhysics.changeGravitationalForce(),"r"===t&&this.boxPhysics.removeBox(),"q"===t&&(this.boxPhysics.box.xVel+=this.boxPhysics.box.xVel>0?300:-300))},keyLeft(e){const t=e.key;t===this.prevKey&&(this.prevKey=""),["a","d"].includes(t)&&(this.keyArr[this.keyArr.length-1]===t?(this.boxPhysics.stopHorizontalAccel(),this.keyArr.pop(),this.keyArr.length&&this.keyPressed({key:this.keyArr.pop()})):this.keyArr.splice(this.keyArr.indexOf(t),1))},addBox(){this.boxPhysics.addBox([(this.width-20)*Math.random(),(this.height-20)*Math.random()])},removeBox(){this.boxPhysics.removeBox()}}};const It=(0,h.A)(Bt,[["render",ft]]);var Pt=It;const At={id:"contentWrapper"},Lt={id:"content"},Mt={class:"chessRoomInfo"},St={class:"chessRoomId"},Tt={class:"numOfPlayer"};function Ot(e,t,s,i,n,a){const h=(0,o.g2)("ChessGameHeader"),r=(0,o.g2)("KeyboardComp"),c=(0,o.g2)("ChessBottomBar"),l=(0,o.g2)("GameResultPannel"),u=(0,o.g2)("ChessGameConfig"),d=(0,o.g2)("MessageWindow"),m=(0,o.g2)("ChatBox");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",At,[(0,o.Lk)("div",Lt,[(0,o.Lk)("div",Mt,[(0,o.Lk)("div",St,"chess room: "+(0,g.v_)(n.roomId),1),(0,o.Lk)("div",Tt,"player online: "+(0,g.v_)(e.numOfPlayer),1)]),(0,o.bF)(h,{modelValue:n.chess.currSide,"onUpdate:modelValue":t[0]||(t[0]=e=>n.chess.currSide=e),chess:n.chess,onShiftTextQueue:e=>[],auth:{undo:!1,textQueue:!1}},null,8,["modelValue","chess"]),(0,o.bF)(r,{onKeyboardBlocksLoaded:a.LoadKeyboardBlocks,WIDTH:8,HEIGHT:8,KEYBOARD:n.chess.keyboard,clickBlock:a.clickBlcok,imgsObj:{whitepawn:"/imgs/chess/whitePawn.png",whiterook:"/imgs/chess/whiteRook.png",whiteknight:"/imgs/chess/whiteKnight.png",whitebishop:"/imgs/chess/whiteBishop.png",whitequeen:"/imgs/chess/whiteQueen.png",whiteking:"/imgs/chess/whiteKing.png",blackpawn:"/imgs/chess/blackPawn.png",blackrook:"/imgs/chess/blackRook.png",blackknight:"/imgs/chess/blackKnight.png",blackbishop:"/imgs/chess/blackBishop.png",blackqueen:"/imgs/chess/blackQueen.png",blackking:"/imgs/chess/blackKing.png"}},null,8,["onKeyboardBlocksLoaded","KEYBOARD","clickBlock"]),(0,o.bF)(c,{toggleConfigPannel:a.toggleConfigPannel,showConfigurePannel:n.showConfigurePannel,startNewGame:a.startNewGame},null,8,["toggleConfigPannel","showConfigurePannel","startNewGame"])]),n.showResultPannel?((0,o.uX)(),(0,o.Wv)(l,{key:0,gameResults:n.gameResults},null,8,["gameResults"])):(0,o.Q3)("",!0),n.showConfigurePannel?((0,o.uX)(),(0,o.Wv)(u,{key:1,saveGame:a.saveGame},null,8,["saveGame"])):(0,o.Q3)("",!0)]),(0,o.bF)(d,{messageType:n.messageType,message:n.message,showMessage:n.showMessage},null,8,["messageType","message","showMessage"]),n.roomId?((0,o.uX)(),(0,o.Wv)(m,{key:0,oldSocket:n.socket,oldRoomId:n.roomId},null,8,["oldSocket","oldRoomId"])):(0,o.Q3)("",!0)],64)}var Rt=s(71714);const Et={class:"barWrapper"},Gt=["onclick"],Ht=["onclick"];function Kt(e,t,s,i,n,a){return(0,o.uX)(),(0,o.CE)("div",Et,[(0,o.Lk)("button",{id:"openConfigureGamePannel",class:"button",onclick:s.toggleConfigPannel},(0,g.v_)(s.showConfigurePannel?"close configrue game pannel":"open configure game pannel"),9,Gt),(0,o.Lk)("button",{id:"newGame",class:"button",onclick:s.startNewGame}," new game ",8,Ht)])}var Dt={name:"ChessBottomBar",props:["toggleConfigPannel","showConfigurePannel","startNewGame"]};const Vt=(0,h.A)(Dt,[["render",Kt]]);var Wt=Vt;const _t={class:"chatBoxWrapper"},Ft={class:"contentWrapper"},Nt={id:"roomInfo"},Xt={id:"roomId"},Yt={id:"numOfUser"},Qt={class:"buttomBar"};function zt(e,t,s,n,a,h){return(0,o.uX)(),(0,o.CE)("div",_t,[(0,o.Lk)("button",{class:"button",id:"toggleChatBox",onClick:t[0]||(t[0]=(...e)=>h.toggleChatBox&&h.toggleChatBox(...e))},(0,g.v_)(a.showChatBox?"close":"open chat"),1),(0,o.bo)((0,o.Lk)("div",Ft,[(0,o.Lk)("div",Nt,[(0,o.Lk)("div",Xt,"room id: "+(0,g.v_)(a.roomId),1),t[4]||(t[4]=(0,o.eW)(" | ")),(0,o.Lk)("div",Yt,"user online: "+(0,g.v_)(a.numOfUser),1)]),t[5]||(t[5]=(0,o.Lk)("div",{id:"messagesWrapper"},null,-1)),(0,o.Lk)("div",Qt,[(0,o.bo)((0,o.Lk)("input",{placeholder:"chat here","onUpdate:modelValue":t[1]||(t[1]=e=>a.message=e),onKeypress:t[2]||(t[2]=(0,i.jR)(((...e)=>h.postMessage&&h.postMessage(...e)),["enter"]))},null,544),[[i.Jo,a.message]]),(0,o.Lk)("button",{id:"postMessaghe",onClick:t[3]||(t[3]=(...e)=>h.postMessage&&h.postMessage(...e))},"send")])],512),[[i.aG,a.showChatBox]])])}var $t={name:"ChatBox",data(){return{texts:[],socket:null,message:"",messagesWrapper:null,showChatBox:!1,roomId:"not room",numOfUser:0}},props:{oldSocket:{require:!1},oldRoomId:{required:!1}},watch:{oldRoomId(e,t){this.roomId=t}},mounted(){this.messagesWrapper=document.getElementById("messagesWrapper"),void 0===this.oldSocket?this.socket=(0,Rt.Ay)("http://192.168.2.15:3000"):this.socket=this.oldSocket,void 0!==this.oldRoomId&&(this.roomId=this.oldRoomId),this.doInteractionWithServer()},methods:{doInteractionWithServer(){this.socket.emit("joinChatRoom",this.roomId),this.socket.on("chatRoomInfo",(e=>{const{numOfUser:t,roomId:s}=JSON.parse(e);this.roomId=s,this.numOfUser=t})),this.socket.on("chatUserJoined",(e=>{const{userId:t,numOfUser:s}=JSON.parse(e);this.numOfUser=s;const i=`user ${t} has joined the room`;this.addMessage(i,"headsupMessage")})),this.socket.on("chatUserLeft",(e=>{const{userId:t,numOfUser:s}=JSON.parse(e);this.numOfUser=s;const i=`user ${t} has left the room`;this.addMessage(i,"warningMessage")})),this.socket.on("newMessage",(e=>{const{user:t,message:s}=JSON.parse(e),i=t+": "+s,o="regularMessage";this.addMessage(i,o)}))},postMessage(){""!==this.message&&(this.socket.emit("postMessage",this.message),this.message="")},toggleChatBox(){this.showChatBox=!this.showChatBox},addMessage(e,t){const s=document.createElement("div");s.classList.add("messageDiv"),s.classList.add(t),s.innerHTML=e,this.messagesWrapper.appendChild(s),this.scrollToBottom()},scrollToBottom(){this.messagesWrapper.scrollTop=this.messagesWrapper.scrollHeight}}};const qt=(0,h.A)($t,[["render",zt]]);var Ut=qt,jt={name:"ChessGame",components:{KeyboardComp:X,ChessGameHeader:j,GameResultPannel:he,ChessGameConfig:Fe,MessageWindow:Ve,ChessBottomBar:Wt,ChatBox:Ut},data(){return{chess:new be,KEY_BOARD_BLOCKS:[],gameResults:{time:0,winner:"unknown"},showResultPannel:!1,showConfigurePannel:!1,messageType:"",message:"",showMessage:!1,socket:null,userSide:"",roomId:null,checkmatePiece:null,checkmateCoor:null}},watch:{checkmatePiece(e,t){if(e!==t)if(null===e){const[e,t]=this.checkmateCoor,s=document.getElementById(e+","+t);s.classList.remove("warning"),this.checkmateCoor=null}else{this.checkmateCoor=this.checkmatePiece.coordinate;const[e,t]=this.checkmateCoor,s=document.getElementById(e+","+t);s.classList.add("warning")}}},async mounted(){this.chessLayouts=ke,"pending"===this.chess.status&&(this.currLayout=this.chessLayouts[0],this.chess.initChessGame(this.currLayout)),this.doInteractionWithServer()},methods:{LoadKeyboardBlocks(e){this.KEY_BOARD_BLOCKS=e},clickBlcok(e){const t=[[this.chess.currPiece,e]];if(this.chess.currSide!==this.userSide)return;if("ended"===this.chess.status)return;const[s,i]=e,o=this.chess.keyboard,n=this.chess.currPiece,a=o[s][i];if(null!=n&&n.side!==this.chess.currSide)this.chess.textQueue.push(`the current side is not ${n.side}`),this.removeHighLight(n),this.chess.currPiece=null;else if(null==n&&null==a);else if(null==n&&null!=a)this.addHighLight(a),this.chess.currPiece=a;else if(null!=n&&null==a){const s=JSON.parse(JSON.stringify(this.chess.currPiece.coordinate));this.chess.makeChessMove(t)&&(this.checkIfPromote(e)?this.sendPromotionInfo(s,e):this.socket.emit("makeMove",JSON.stringify([s,e])),this.chess.currPiece=null)}else if(null!=n&&null!=a){const s=JSON.parse(JSON.stringify(this.chess.currPiece.coordinate));n===a?(this.removeHighLight(this.chess.currPiece),this.chess.currPiece=null):n.side===a.side?(this.removeHighLight(this.chess.currPiece),this.chess.currPiece=a,this.addHighLight(this.chess.currPiece)):this.chess.makeChessMove(t)&&(this.checkIfPromote(e)?this.sendPromotionInfo(s,e):this.socket.emit("makeMove",JSON.stringify([s,e])),this.chess.currPiece=null)}setTimeout((()=>{this.updateCheckmatePiece(),"ended"===this.chess.status&&(this.showResultPannel=!0,this.generateResults())}),100)},addHighLight(e){const[t,s]=e.coordinate,i=this.KEY_BOARD_BLOCKS[t][s].firstElementChild;void 0!==i&&i.classList.add("highlighted")},removeHighLight(e){const[t,s]=e.coordinate,i=this.KEY_BOARD_BLOCKS[t][s].firstElementChild;i&&i.classList.remove("highlighted")},updateCheckmatePiece(){this.checkmatePiece=this.chess.checkmatePiece},generateResults(){this.gameResults.time=Pe.formatBySecond(this.chess.gameTime),this.gameResults.winner=this.chess.winner+" side"},async saveGame(e,t,s){const i=this.generateLayout();await Ae.A.post("http://localhost:3000/saveChessGame",{name:e,side:t,difficulty:s,layout:i}).then((e=>{console.log("game saved successfully!")})),this.showMessageWindow("new game saved to local hard disk!","regular"),this.toggleConfigPannel()},generateLayout(){const e=[],t=this.chess.keyboard;for(let s=0;s<t.length;s++)for(let i=0;i<t[s].length;i++){const o=t[s][i];if(null!=o){const t=[o.side,o.coordinate,o.name];e.push(t)}}return e},toggleConfigPannel(){this.showConfigurePannel=!this.showConfigurePannel},restart(){this.showResultPannel=!1,this.chess.initChessGame(this.currLayout),this.updateCheckmatePiece()},endTheGame(){this.showResultPannel=!0,this.generateResults()},startNewGame(){console.log("starting new game")},showMessageWindow(e,t){this.message=e,this.messageType=t,this.showMessage=!0,setTimeout((()=>{this.showMessage=!1}),2e3)},doInteractionWithServer(){this.socket=(0,Rt.Ay)("http://192.168.2.15:3000",{withCredentials:!0,transports:["websocket"]}),this.socket.emit("joinChessRoom"),this.socket.on("chessRoomInfo",(e=>{const{numOfPlayer:t,roomId:s}=JSON.parse(e);this.numOfPlayer=t,this.roomId=s})),this.socket.on("playerJoined",(e=>{this.numOfPlayer=e})),this.socket.on("roomFull",(e=>{this.showMessageWindow(e,"warning")})),this.socket.on("gameStart",(e=>{this.showMessageWindow(e,"regular")})),this.socket.on("initGame",(e=>{this.currLayout=e.layout,this.userSide=e.userSide,this.restart()})),this.socket.on("moveMade",(e=>{e=JSON.parse(e);const[t,s]=e[0],i=this.chess.keyboard[t][s];this.chess.makeChessMove([[i,e[1]]]),this.updateCheckmatePiece(),"ended"===this.chess.status&&this.endTheGame()})),this.socket.on("promoteHappened",(e=>{const t=JSON.parse(e),{row:s,col:i}=t[0],o=this.chess.keyboard[s][i],n=t[1],a=t[2];this.chess.promotion(o,n,a)})),this.socket.on("playerLeft",(e=>{const{message:t,numOfPlayer:s}=JSON.parse(e);this.showMessageWindow(t,"warning"),this.numOfPlayer=s})),this.socket.on("promotionInfo",(e=>{this.synchronizePromoteInfo(JSON.parse(e))}))},checkIfPromote(e){const t=this.chess.keyboard[e[0]][e[1]],s=null!=t&&"pawn"===t.type&&("white"===t.side&&e[0]===this.chess.KEYBOARD_HEIGHT-1||"black"===t.side&&0===e[0]);return s&&console.log("promotion happened"),s},sendPromotionInfo(e,t){setTimeout((()=>{this.socket.emit("syncPromotion",JSON.stringify({type:this.chess.keyboard[t[0]][t[1]].type,coors:[e,t]}))}),100)},synchronizePromoteInfo(e){const{type:t,coors:s}=e,[i,o]=s,n=this.chess.keyboard[i[0]][i[1]],a=[[n,o]];this.chess.textQueue.length=0;const h=a.length;this.chess.moveRecord.push(h);const[r,c]=a[0];this.chess.loadMove(r,c);const l=r.side;this.chess.removeFromKeyboard(r),this.chess.addPiece(l,c,t),this.chess.varifyMoveByCheckmate(),this.chess.changeSide()}}};const Jt=(0,h.A)(jt,[["render",Ot]]);var Zt=Jt;const es=[{path:"/",name:"HomePage",component:P},{path:"/ChessGame",name:"ChessGame",component:Qe},{path:"/TypingGame",name:"TypingGame",component:et},{path:"/MineSweep",name:"MineSweep",component:wt},{path:"/BoxPhysics",name:"BoxPhysics",component:Pt},{path:"/MultiplayerChess",name:"MultiplayerChess",component:Zt},{path:"/ChatBox",name:"ChatBox",component:Ut}],ts=(0,u.aE)({history:(0,u.LA)("/"),routes:es});var ss=ts;const is=(0,i.Ef)(l);is.use(ss),is.mount("#app")}},t={};function s(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,i,o,n){if(!i){var a=1/0;for(l=0;l<e.length;l++){i=e[l][0],o=e[l][1],n=e[l][2];for(var h=!0,r=0;r<i.length;r++)(!1&n||a>=n)&&Object.keys(s.O).every((function(e){return s.O[e](i[r])}))?i.splice(r--,1):(h=!1,n<a&&(a=n));if(h){e.splice(l--,1);var c=o();void 0!==c&&(t=c)}}return t}n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[i,o,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,n,a=i[0],h=i[1],r=i[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(o in h)s.o(h,o)&&(s.m[o]=h[o]);if(r)var l=r(s)}for(t&&t(i);c<a.length;c++)n=a[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(l)},i=self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[504],(function(){return s(83839)}));i=s.O(i)})();
//# sourceMappingURL=app.884375ee.js.map